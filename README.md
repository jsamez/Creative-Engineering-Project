# 창의적 공학설계 프로젝트

## 프로젝트 개요
본 프로젝트는 아두이노를 활용하여 7-Segment 디스플레이와 멜로디 기능을 연동한 시스템을 설계하고 구현하는 것을 목표로 진행되었습니다. 초기 아이디어부터 문제 해결 과정까지 단계적으로 접근하여 개발된 내용을 정리하였습니다.

---

## 단계 1: 랜덤 숫자와 멜로디 출력
### 초기 아이디어
- 스위치를 눌렀을 때 1~9 사이의 랜덤 숫자가 7-Segment 디스플레이에 표시됨.
- 숫자별로 다른 소리가 출력되도록 설계.

### 주요 구현 내용
1. **랜덤 숫자 생성**: `randomSeed(analogRead(A3))`를 사용하여 랜덤 숫자 생성.
2. **7-Segment 디스플레이**: 랜덤 숫자를 7-Segment 배열로 표시.
3. **숫자별 소리 출력**: `tone()` 함수를 사용하여 숫자별 고유 멜로디 구현.
4. **디바운싱 처리**: 랜덤 숫자가 여러 번 변하지 않도록 안정화.

### 문제점 및 해결 방법
- **문제점 1**: 랜덤 숫자가 범위를 벗어나거나 소리가 중첩되는 현상 발생.
  - **해결 방법**: 랜덤 범위를 1~9로 제한하고, 스위치 해제 후 소리가 출력되도록 수정.
- **문제점 2**: 출력 위치 문제.
  - **해결 방법**: 자릿수 배열과 스위치 입력 조건 추가.

---

## 단계 2: 주사위 게임 구현
### 초기 아이디어
1. **아두이노 및 사용자 랜덤 숫자 생성**:
   - 아두이노와 사용자가 각각 1~6 사이의 숫자 2개를 생성하여 7-Segment에 표시.
2. **시각적/청각적 효과**:
   - 숫자 표시 시 깜박임 효과 및 멜로디 추가.
3. **결과 비교**:
   - 두 숫자의 합을 비교하여 승자, 무효 처리.
4. **스코어 표시**:
   - SW2를 눌러 전체 경기 수, 아두이노 승리 수, 사용자 승리 수 표시.

### 주요 구현 내용
- **결과 비교 및 표시**:
  - `if`문을 사용하여 승자 및 무효 판별.
  - 승리/무효 상황별로 다른 멜로디와 시각 효과 적용.
- **스코어 기록**:
  - 각 결과를 변수에 저장하여 SW2 입력 시 7-Segment에 순차적으로 출력.

### 문제점 및 해결 방법
- **문제점 1**: 7-Segment에 숫자 2개 동시 출력 문제.
  - **해결 방법**: `for`문과 `delay`를 활용하여 번갈아 가며 출력.
- **문제점 2**: 소리가 끊어지는 문제.
  - **해결 방법**: 소리 출력 코드를 `for`문 외부로 이동.
- **문제점 3**: 스위치 입력 처리 문제.
  - **해결 방법**: `while`문으로 입력 상태를 제어.

---

## 설계한 주요 코드
### 랜덤 숫자 및 멜로디 출력
```cpp
byte cs[10] = {B00111111, B00000110, B01011011, B01001111, B01100110, 
               B01101101,B01111101 ,B00000111, B01111111, B01101111};

int Melody[9] = {262, 294, 330, 349, 392, 440, 494, 523, 588};
int duration[9] = {1, 2, 1, 2, 1, 2, 1, 2, 1};

void setup() {
  pinMode(4, OUTPUT);
  pinMode(5, OUTPUT);
  pinMode(2, OUTPUT);
  pinMode(A1, INPUT_PULLUP);
  randomSeed(analogRead(A3));
}

void loop() {
  if (digitalRead(A1) == 0) {
    int i = random(1, 10);
    tone(3, Melody[i - 1], duration[i - 1] * 300);
    delay(duration[i - 1] * 400);
  }
}
```

### 주사위 게임
```cpp
void loop() {
  int user_num1 = random(1, 7);
  int user_num2 = random(1, 7);
  int arduino_num1 = random(1, 7);
  int arduino_num2 = random(1, 7);

  int user_sum = user_num1 + user_num2;
  int arduino_sum = arduino_num1 + arduino_num2;

  if (user_sum > arduino_sum) {
    // 사용자 승리
  } else if (arduino_sum > user_sum) {
    // 아두이노 승리
  } else {
    // 무효
  }
}
```

---

## 참고 자료
- 아두이노 공식 문서
- 7-Segment 디스플레이 제어 코드
- `tone()` 함수 활용 방법

---

## 프로젝트 개선 및 추가 아이디어
1. **디스플레이 업그레이드**:
   - 더 많은 정보를 표현할 수 있는 LCD 디스플레이로 변경.
2. **Bluetooth 연동**:
   - 스마트폰과 연결하여 결과를 실시간으로 전송.
3. **게임 확장**:
   - 주사위 외 다양한 미니게임 추가.

---

감사합니다!
